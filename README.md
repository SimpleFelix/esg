# ESG
ESG is short for Error Struct Generator.
It only generate Go source code recently.

### Build
`go build -o esg`

### Usage
`./esg output_dir pkg_name error_code formatted_message [name_of_arguments..]`

### Example
`./esg /src/myproj errors InvalidPhone "%v is not valid phone number." phone`

The generated file is at `./src/myproj/InvalidPhone.go`

The source code looks like below.
```go
// Package errors
// Generated by ESG at 2006-01-02 15:04:05. github.com/SimpleFelix/esg
package errors

import "fmt"

type InvalidPhone struct {
	phone interface{}
}

func (e InvalidPhone)Code() string {
	return "InvalidPhone"
}

func (e InvalidPhone)Error() string {
	return fmt.Sprintf("%v is not valid phone number.", e.phone)
}

func NewInvalidPhone(phone interface{}) InvalidPhone {
	return InvalidPhone{
		phone: phone,
	}
}
```
### Scene
Sometimes you need to send a JSON to the client. There are error message and error code within the payload.
```json
{
  "error": {
    "code": "InvalidPhone",
    "msg": "abc123 is not valid phone number."
  }
}
```